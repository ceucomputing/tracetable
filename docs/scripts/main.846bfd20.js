SVGElement.prototype.getTransformToElement=SVGElement.prototype.getTransformToElement||function(t){return t.getScreenCTM().inverse().multiply(this.getScreenCTM())},String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var r=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>r.length)&&(e=r.length),e-=t.length;var n=r.lastIndexOf(t,e);return-1!==n&&n===e}),window.parser=function(){function t(t,e,r,n,a,o){this.message=t,this.expected=e,this.found=r,this.offset=n,this.line=a,this.column=o,this.name="SyntaxError"}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(t,Error),{SyntaxError:t,parse:function(e){function r(t){return Bt!==t&&(Bt>t&&(Bt=0,qt={line:1,column:1,seenCR:!1}),function(t,r,n){var a,o;for(a=r;a<n;a++)"\n"===(o=e.charAt(a))?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}(qt,Bt,t),Bt=t),qt}function n(t){Wt<Ht||(Wt>Ht&&(Ht=Wt,Kt=[]),Kt.push(t))}function a(n,a,o){var c=r(o),l=o<e.length?e.charAt(o):null;return null!==a&&function(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(a),new t(null!==n?n:function(t,e){var r,n,a,o=new Array(t.length);for(a=0;a<t.length;a++)o[a]=t[a].description;return r=t.length>1?o.slice(0,-1).join(", ")+" or "+o[t.length-1]:o[0],n=e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}(e)+'"':"end of input","Expected "+r+" but "+n+" found."}(a,l),a,l,o,c.line,c.column)}function o(){var t,r;return t=Wt,(r=function(){var t,r,a,o,c,i;if(t=Wt,(r=l())!==A){if(a=[],o=Wt,c=[],10===e.charCodeAt(Wt)?(i=C,Wt++):(i=A,0===Qt&&n(I)),i!==A)for(;i!==A;)c.push(i),10===e.charCodeAt(Wt)?(i=C,Wt++):(i=A,0===Qt&&n(I));else c=x;if(c!==A&&(i=l())!==A?(Vt=o,c=S(i),o=c):(Wt=o,o=x),o!==A)for(;o!==A;){if(a.push(o),o=Wt,c=[],10===e.charCodeAt(Wt)?(i=C,Wt++):(i=A,0===Qt&&n(I)),i!==A)for(;i!==A;)c.push(i),10===e.charCodeAt(Wt)?(i=C,Wt++):(i=A,0===Qt&&n(I));else c=x;c!==A&&(i=l())!==A?(Vt=o,c=S(i),o=c):(Wt=o,o=x)}else a=x;if(a!==A){for(o=[],10===e.charCodeAt(Wt)?(c=C,Wt++):(c=A,0===Qt&&n(I));c!==A;)o.push(c),10===e.charCodeAt(Wt)?(c=C,Wt++):(c=A,0===Qt&&n(I));o!==A?(Vt=t,r=U(r,a),t=r):(Wt=t,t=x)}else Wt=t,t=x}else Wt=t,t=x;if(t===A)if(t=Wt,(r=l())!==A){for(a=[],10===e.charCodeAt(Wt)?(o=C,Wt++):(o=A,0===Qt&&n(I));o!==A;)a.push(o),10===e.charCodeAt(Wt)?(o=C,Wt++):(o=A,0===Qt&&n(I));a!==A?(Vt=t,r=F(r),t=r):(Wt=t,t=x)}else Wt=t,t=x;return t}())!==A&&(Vt=t,r=w(r)),t=r}function c(){var t,r;for(t=[],32===e.charCodeAt(Wt)?(r=N,Wt++):(r=A,0===Qt&&n(P));r!==A;)t.push(r),32===e.charCodeAt(Wt)?(r=N,Wt++):(r=A,0===Qt&&n(P));return t}function l(){var t,r,a,o;return t=Wt,(r=f())!==A&&c()!==A?(58===e.charCodeAt(Wt)?(a=k,Wt++):(a=A,0===Qt&&n(E)),a!==A&&c()!==A&&(o=i())!==A?(Vt=t,t=r=R(r,o)):(Wt=t,t=x)):(Wt=t,t=x),t===A&&(t=i()),t}function i(){var t,r,a,o;return t=Wt,(r=u())!==A&&c()!==A?(e.substr(Wt,2)===$?(a=$,Wt+=2):(a=A,0===Qt&&n(M)),a!==A&&c()!==A&&(o=f())!==A?(Vt=t,t=r=O(r,o)):(Wt=t,t=x)):(Wt=t,t=x),t===A&&(t=u()),t}function u(){var t,r,a,o,l;return t=Wt,e.substr(Wt,5)===_?(r=_,Wt+=5):(r=A,0===Qt&&n(G)),r!==A&&(Vt=t,r=J()),(t=r)===A&&(t=Wt,e.substr(Wt,3)===L?(r=L,Wt+=3):(r=A,0===Qt&&n(j)),r!==A&&(Vt=t,r=z()),(t=r)===A&&(t=Wt,e.substr(Wt,5)===Z?(r=Z,Wt+=5):(r=A,0===Qt&&n(D)),r!==A&&c()!==A&&(a=b())!==A?(Vt=t,t=r=W(a)):(Wt=t,t=x),t===A&&(t=Wt,e.substr(Wt,6)===V?(r=V,Wt+=6):(r=A,0===Qt&&n(B)),r!==A&&c()!==A&&(a=s())!==A?(Vt=t,t=r=q(a)):(Wt=t,t=x),t===A&&(t=Wt,e.substr(Wt,6)===H?(r=H,Wt+=6):(r=A,0===Qt&&n(K)),r!==A&&c()!==A&&(a=function(){var t,r,a,o;return t=Wt,(r=s())!==A&&c()!==A?(61===e.charCodeAt(Wt)?(a=rt,Wt++):(a=A,0===Qt&&n(nt)),a!==A&&c()!==A&&(o=s())!==A?(Vt=t,r=ot(r,o),t=r):(Wt=t,t=x)):(Wt=t,t=x),t===A&&(t=Wt,(r=s())!==A&&c()!==A?(60===e.charCodeAt(Wt)?(a=ct,Wt++):(a=A,0===Qt&&n(lt)),a!==A&&c()!==A&&(o=s())!==A?(Vt=t,r=it(r,o),t=r):(Wt=t,t=x)):(Wt=t,t=x),t===A&&(t=Wt,(r=s())!==A&&c()!==A?(62===e.charCodeAt(Wt)?(a=ut,Wt++):(a=A,0===Qt&&n(st)),a!==A&&c()!==A&&(o=s())!==A?(Vt=t,r=dt(r,o),t=r):(Wt=t,t=x)):(Wt=t,t=x),t===A&&(t=Wt,(r=s())!==A&&c()!==A?(e.substr(Wt,2)===ht?(a=ht,Wt+=2):(a=A,0===Qt&&n(pt)),a!==A&&c()!==A&&(o=s())!==A?(Vt=t,r=ft(r,o),t=r):(Wt=t,t=x)):(Wt=t,t=x),t===A&&(t=Wt,(r=s())!==A&&c()!==A?(e.substr(Wt,2)===bt?(a=bt,Wt+=2):(a=A,0===Qt&&n(vt)),a!==A&&c()!==A&&(o=s())!==A?(Vt=t,r=mt(r,o),t=r):(Wt=t,t=x)):(Wt=t,t=x),t===A&&(t=Wt,(r=s())!==A&&c()!==A?(e.substr(Wt,2)===gt?(a=gt,Wt+=2):(a=A,0===Qt&&n(At)),a!==A&&c()!==A&&(o=s())!==A?(Vt=t,r=yt(r,o),t=r):(Wt=t,t=x)):(Wt=t,t=x)))))),t}())!==A&&c()!==A?(63===e.charCodeAt(Wt)?(o=Q,Wt++):(o=A,0===Qt&&n(X)),o!==A&&c()!==A&&(l=f())!==A?(Vt=t,t=r=Y(a,l)):(Wt=t,t=x)):(Wt=t,t=x),t===A&&(t=Wt,e.substr(Wt,6)===tt?(r=tt,Wt+=6):(r=A,0===Qt&&n(et)),r!==A&&c()!==A&&(a=b())!==A&&c()!==A?(61===e.charCodeAt(Wt)?(o=rt,Wt++):(o=A,0===Qt&&n(nt)),o!==A&&c()!==A&&(l=s())!==A?(Vt=t,t=r=at(a,l)):(Wt=t,t=x)):(Wt=t,t=x)))))),t}function s(){var t;return(t=d())===A&&(t=function(){var t,r,a,o;if(t=Wt,34===e.charCodeAt(Wt)?(r=_t,Wt++):(r=A,0===Qt&&n(Gt)),r!==A){for(a=[],Jt.test(e.charAt(Wt))?(o=e.charAt(Wt),Wt++):(o=A,0===Qt&&n(Lt));o!==A;)a.push(o),Jt.test(e.charAt(Wt))?(o=e.charAt(Wt),Wt++):(o=A,0===Qt&&n(Lt));a!==A?(34===e.charCodeAt(Wt)?(o=_t,Wt++):(o=A,0===Qt&&n(Gt)),o!==A?(Vt=t,r=jt(a),t=r):(Wt=t,t=x)):(Wt=t,t=x)}else Wt=t,t=x;return t}()),t}function d(){var t,r,a,o;return t=Wt,(r=h())!==A&&c()!==A?(Tt.test(e.charAt(Wt))?(a=e.charAt(Wt),Wt++):(a=A,0===Qt&&n(wt)),a!==A&&c()!==A&&(o=d())!==A?(Vt=t,t=r=xt(r,a,o)):(Wt=t,t=x)):(Wt=t,t=x),t===A&&(t=h()),t}function h(){var t,r,a,o;return t=Wt,(r=p())!==A&&c()!==A?(Ct.test(e.charAt(Wt))?(a=e.charAt(Wt),Wt++):(a=A,0===Qt&&n(It)),a!==A&&c()!==A&&(o=h())!==A?(Vt=t,t=r=xt(r,a,o)):(Wt=t,t=x)):(Wt=t,t=x),t===A&&(t=p()),t}function p(){var t,r,a,o;return(t=function(){var t,r,a;if(Qt++,t=Wt,r=[],Et.test(e.charAt(Wt))?(a=e.charAt(Wt),Wt++):(a=A,0===Qt&&n(Rt)),a!==A)for(;a!==A;)r.push(a),Et.test(e.charAt(Wt))?(a=e.charAt(Wt),Wt++):(a=A,0===Qt&&n(Rt));else r=x;return r!==A&&(Vt=t,r=$t(r)),t=r,Qt--,t===A&&(r=A,0===Qt&&n(kt)),t}())===A&&(t=Wt,40===e.charCodeAt(Wt)?(r=St,Wt++):(r=A,0===Qt&&n(Ut)),r!==A&&c()!==A&&(a=d())!==A&&c()!==A?(41===e.charCodeAt(Wt)?(o=Ft,Wt++):(o=A,0===Qt&&n(Nt)),o!==A?(Vt=t,t=r=Pt(a)):(Wt=t,t=x)):(Wt=t,t=x),t===A&&(t=b())),t}function f(){var t,e;return t=Wt,(e=v())!==A&&(Vt=t,e=Mt(e)),t=e}function b(){var t,e;return t=Wt,(e=v())!==A&&(Vt=t,e=Ot(e)),t=e}function v(){var t,r,a;if(t=Wt,r=[],zt.test(e.charAt(Wt))?(a=e.charAt(Wt),Wt++):(a=A,0===Qt&&n(Zt)),a!==A)for(;a!==A;)r.push(a),zt.test(e.charAt(Wt))?(a=e.charAt(Wt),Wt++):(a=A,0===Qt&&n(Zt));else r=x;return r!==A&&(Vt=t,r=Dt(r)),t=r}var m,g=arguments.length>1?arguments[1]:{},A={},y={start:o},T=o,w=function(t){return{labels:Xt,vars:Yt,varsList:te,commands:t}},x=A,C="\n",I={type:"literal",value:"\n",description:'"\\n"'},S=function(t){return t},U=function(t,e){return[t].concat(e)},F=function(t){return[Yt,t]},N=" ",P={type:"literal",value:" ",description:'" "'},k=":",E={type:"literal",value:":",description:'":"'},R=function(t,e){return Xt[t]=r(Vt).line-1,e},$="->",M={type:"literal",value:"->",description:'"->"'},O=function(t,e){return t.chain=e,t},_="START",G={type:"literal",value:"START",description:'"START"'},J=function(){return{command:"START",title:"Start"}},L="END",j={type:"literal",value:"END",description:'"END"'},z=function(){return{command:"END",title:"End"}},Z="INPUT",D={type:"literal",value:"INPUT",description:'"INPUT"'},W=function(t){return{command:"INPUT",title:"INPUT "+t.title,code:t.code+'=tracetableInput("'+t.title+'")',var:t.title}},V="OUTPUT",B={type:"literal",value:"OUTPUT",description:'"OUTPUT"'},q=function(t){return{command:"OUTPUT",title:"OUTPUT "+t.title,code:"tracetableOutput("+t.code+")"}},H="JUMPIF",K={type:"literal",value:"JUMPIF",description:'"JUMPIF"'},Q="?",X={type:"literal",value:"?",description:'"?"'},Y=function(t,e){return{command:"JUMPIF",title:t.title+"?",condition:t.code,then:e}},tt="ASSIGN",et={type:"literal",value:"ASSIGN",description:'"ASSIGN"'},rt="=",nt={type:"literal",value:"=",description:'"="'},at=function(t,e){return{command:"ASSIGN",title:t.title+" = "+e.title,code:t.code+"="+e.code,var:t.title}},ot=function(t,e){return{title:t.title+" = "+e.title,code:"("+t.code+")==("+e.code+")"}},ct="<",lt={type:"literal",value:"<",description:'"<"'},it=function(t,e){return{title:t.title+" < "+e.title,code:"("+t.code+")<("+e.code+")"}},ut=">",st={type:"literal",value:">",description:'">"'},dt=function(t,e){return{title:t.title+" > "+e.title,code:"("+t.code+")>("+e.code+")"}},ht="!=",pt={type:"literal",value:"!=",description:'"!="'},ft=function(t,e){return{title:t.title+" != "+e.title,code:"("+t.code+")!=("+e.code+")"}},bt="<=",vt={type:"literal",value:"<=",description:'"<="'},mt=function(t,e){return{title:t.title+" <= "+e.title,code:"("+t.code+")<=("+e.code+")"}},gt=">=",At={type:"literal",value:">=",description:'">="'},yt=function(t,e){return{title:t.title+" >= "+e.title,code:"("+t.code+")>=("+e.code+")"}},Tt=/^[+\-]/,wt={type:"class",value:"[+\\-]",description:"[+\\-]"},xt=function(t,e,r){return{title:t.title+" "+e+" "+r.title,code:t.code+e+r.code}},Ct=/^[*\/]/,It={type:"class",value:"[*\\/]",description:"[*\\/]"},St="(",Ut={type:"literal",value:"(",description:'"("'},Ft=")",Nt={type:"literal",value:")",description:'")"'},Pt=function(t){return{title:"("+t.title+")",code:"("+t.code+")"}},kt={type:"other",description:"integer"},Et=/^[0-9]/,Rt={type:"class",value:"[0-9]",description:"[0-9]"},$t=function(t){return{title:t.join(""),code:t.join("")}},Mt=function(t){return"label_"+t},Ot=function(t){return t in Yt||(Yt[t]=te.length,te.push(t)),{title:t,code:'tracetableScope["'+t+'"]'}},_t='"',Gt={type:"literal",value:'"',description:'"\\""'},Jt=/^[a-zA-Z0-9 ]/,Lt={type:"class",value:"[a-zA-Z0-9 ]",description:"[a-zA-Z0-9 ]"},jt=function(t){return{title:"'"+t.join("")+"'",code:'"'+t.join("")+'"'}},zt=/^[a-zA-Z]/,Zt={type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},Dt=function(t){return t.join("")},Wt=0,Vt=0,Bt=0,qt={line:1,column:1,seenCR:!1},Ht=0,Kt=[],Qt=0;if("startRule"in g){if(!(g.startRule in y))throw new Error("Can't start parsing from rule \""+g.startRule+'".');T=y[g.startRule]}var Xt={},Yt={},te=[];if((m=T())!==A&&Wt===e.length)return m;throw m!==A&&Wt<e.length&&n({type:"end",description:"end of input"}),a(null,Kt,Ht)}}}(),$(function(){"use strict";function render(t,e){var r,n,a=t.labels,o=t.commands,c="";for(r=0;r<o.length;r++){var l="operation";switch((n=o[r]).command){case"JUMPIF":l="condition";break;case"START":l="start";break;case"END":l="end";break;case"INPUT":case"OUTPUT":l="inputoutput"}var i="";null!=e&&r===e&&(i="|current"),c+="node_"+r+"=>"+l+": "+n.title+i+"\n"}for(c+="\n",r=0;r<o.length;r++){n=o[r];var u=r<o.length-1?r+1:null,s="->";n.chain&&(u=a[n.chain],(n.chain.endsWith("_loop")||n.chain.endsWith("_right"))&&(s="(right)->"),n.chain.endsWith("_bottom")&&(s="(bottom)->")),u&&("JUMPIF"===n.command&&(s="(no)->"),c+="node_"+r+s+"node_"+u+"\n"),"JUMPIF"===n.command&&n.then&&(c+="node_"+r+"(yes)->node_"+a[n.then]+"\n")}!function(t){var e=window.flowchart.parse(t);$("#diagram").empty(),e.drawSVG("diagram",{"line-length":25,flowstate:{current:{fill:"yellow","font-color":"red"}}})}(c),function(){var e="";if(0===tracetableItems.length)e+='<tr><td colspan="'+(t.varsList.length+1)+'">No items to display</td></tr>';else for(var r=0;r<tracetableItems.length;r++){e+="<tr>";for(var n=0;n<tracetableItems[r].length;n++)e+="<td>"+tracetableItems[r][n]+"</td>";e+="</tr>"}$("#tracetable > tbody").html(e)}()}function execute(flowchart,current,callback){function updateTracetable(t){for(var e=[],r=vars[t],n=0;n<varsList.length+1;n++)e[n]=r===n?tracetableScope[t]:"";tracetableItems.push(e)}function tracetableInput(t){function e(r){if(null==r)callback(current,current);else{var n=parseInt(r);isNaN(n)?bootbox.prompt("Enter an integer value for "+t+":",e):(tracetableScope[t]=n,updateTracetable(t),callback(current,chain))}}e(NaN)}function tracetableOutput(t){for(var e=[],r=0;r<varsList.length;r++)e[r]="";e[varsList.length]=t,tracetableItems.push(e)}var labels=flowchart.labels,vars=flowchart.vars,varsList=flowchart.varsList,commands=flowchart.commands,command=commands[current],chain=current<commands.length-1?current+1:null;switch(command.chain&&(chain=labels[command.chain]),command.command){case"JUMPIF":var condition=eval(command.condition);condition&&(chain=labels[command.then]),callback(current,chain);break;case"INPUT":tracetableInput(command.var);break;case"ASSIGN":eval(command.code),updateTracetable(command.var),callback(current,chain);break;case"OUTPUT":eval(command.code),callback(current,chain);break;default:callback(current,chain)}}function resetTracetable(){var t=[];globalFlowchart&&(t=globalFlowchart.varsList);for(var e="<tr>",r=0;r<t.length;r++)e+="<th>"+t[r]+"</th>";e+="<th>OUTPUT</th></tr>",$("#tracetable > thead").html(e),tracetableItems=[]}function reset(){resetTracetable(),execute(globalFlowchart,globalCurrent=0,function(t,e){globalNext=e,render(globalFlowchart,globalCurrent=t),$("#next").prop("disabled",null==globalNext)})}var globalFlowchart=null,globalCurrent=0,globalNext=null,tracetableScope={},tracetableItems=[];if(""===window.location.search)$(".nav a").on("click",function(t){$.get($(t.target).data("src"),function(t){globalFlowchart=window.parser.parse(t),reset()})}),$(".nav a:first").click();else{$(".nav").hide();var data=deparam(window.location.search.slice(1)).f.replace(/\r\n/g,"\n");globalFlowchart=window.parser.parse(data),reset()}$("#next").on("click",function(){null!=globalNext&&($("#next").prop("disabled",!0),$("#reset").prop("disabled",!0),render(globalFlowchart,globalNext),execute(globalFlowchart,globalNext,function(t,e){globalNext=e,render(globalFlowchart,globalCurrent=t),$("#next").prop("disabled",null==globalNext),$("#reset").prop("disabled",!1),null==globalNext&&bootbox.alert("Flowchart has ended. Select another flowchart or Reset to run again.")}))}),$("#reset").on("click",function(){reset()})});